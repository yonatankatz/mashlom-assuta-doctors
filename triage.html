<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive UI with Chips and List (RTL)</title>
<link rel="stylesheet" href="css/triage.css">
<script src="js/utils.js"></script>
<script src="js/angular.min.js"></script>
</head>
<body ng-app="app" ng-controller="TriageController as ctrl">

<div id="header" class="header" style="{{'background-color: ' + ctrl.colorByLevel[ctrl.triageLevel] }}">
  <div id="triage-level" class="triage-level">
    <span ng-if="ctrl.triageLevel == 100"> בחר מצב חולה. לאיפוס, לחץ כאן -> </span>
    <span ng-if="ctrl.triageLevel < 100" class="triage-caption"> טריאז' {{ctrl.triageLevel}}</span><span class="triage-sub-caption">{{ctrl.captionByLevel[ctrl.triageLevel]}}</span>
  </div>
  <div class="reset-buttons">
    <span class="reset-all" ng-click="ctrl.resetAll()"><img style="cursor:pointer; width: 40px; height: 40px;margin-right:10px; " src="assets/refresh.png"></span>
  </div>  
</div>
<div class="content">
<div id="filters" class="filters-group">
    <div ng-repeat="category in ctrl.categories" class="chip" 
      ng-class="{ 'selected': ctrl.selectedCategories.includes(category.categoryId) }"
      ng-click="ctrl.toggleFilter(category.categoryId)">
        {{category.categoryDisplay}}
    </div>      
  </div>
  <div class="list-conditions" id="list-conditions">
    <div ng-repeat="item in ctrl.triageData" class="list-condition"
         ng-show="ctrl.showItem(item)"
         ng-class="{'selected-row' : ctrl.selectedRows.includes(item)}"
         ng-click="ctrl.toggleRow(item)">
      {{item.description}}
      <span class="badge" style="{{'background-color: ' + ctrl.colorByLevel[item.level] }}">{{item.level}}</span>
    </div>
  </div>
</div>

<div class="footer">
    <div id="footer-menu" ng-show="!ctrl.searchBarOpen">
      <a id="searchBtn" class="footer-button" ng-click="ctrl.openSearchBar()">
        <div class="icon">🔍</div>
        <div class="text">חפש</div>
      </a>
      <a href="#" class="footer-button">
        <div class="icon">🌡️</div>
        <div class="text">מדדים</div>
      </a>
    </div>
    <div id="searchbox-container" class="searchbox-container" ng-show="ctrl.searchBarOpen">
      <button class="closeButton" ng-click="ctrl.closeSearchBar()">×</button>
      <input type="text" class="search-input" id="searchInput" ng-model="ctrl.searchText" ng-keyup="ctrl.searchTyping($event)" placeholder="חיפוש לפי כל הערכים..">
    </div>
  </div>
  
<script src="js/triage.js"></script>
</body>
</html>
